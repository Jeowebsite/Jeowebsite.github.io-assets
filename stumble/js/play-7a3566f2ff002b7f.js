(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[141],{7454:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/play",function(){return s(8231)}])},8231:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return P},default:function(){return B}});var n=s(5893),a=s(6549);class l{defineSlots(){if(window){let{googletag:e}=window;e.cmd.push(async()=>{this.slots=await Promise.all(this.slots.map(async t=>{let{name:s,id:n,sizes:a,instance:l}=t,i=l;return l||(i=await e.defineSlot(s,a,n).addService(e.pubads())),{name:s,id:n,sizes:a,instance:i}})),e.pubads().enableSingleRequest(),e.enableServices()}),setTimeout(()=>{this.displayAdIfTargetingCookieIsChecked()},3e3),this.refreshTime&&this.initRefresh(this.refreshTime)}}displayAllSlots(){if(window){let{googletag:e}=window;this.slots.forEach(t=>{let{id:s}=t;e.cmd.push(()=>{e.display(s)})})}}displaySlot(e){if(window){let t=this.slots.find(t=>t.id===e);if(t&&t.instance){let{googletag:t}=window;t.cmd.push(()=>{t.display(e)})}}}refreshAllSlots(){if(window){let{googletag:e}=window;e.cmd.push(()=>{e.pubads().refresh()})}}clearAllSlots(){if(window){let{googletag:e}=window;e.cmd.push(()=>{e.pubads().clear()})}}clearSlot(e){if(window){let t=this.slots.find(t=>t.id===e);if(t&&t.instance){let{googletag:e}=window;e.cmd.push(()=>{e.pubads().clear([t.instance])})}}}removeAllSlots(){let{googletag:e}=window;e.cmd.push(()=>{e.destroySlots()}),this.slots=this.slots.map(e=>({...e,instance:null}))}removeSlot(e){let{googletag:t}=window;if(window){let s=this.slots.find(t=>t.id===e);s&&s.instance&&(t.cmd.push(()=>{t.destroySlots([s.instance])}),this.slots[this.slots.indexOf(s)]={...s,instance:null})}}getSlotInstance(e){let t=this.slots.find(t=>t.id===e);return t?t.instance:null}initRefresh(e){setInterval(()=>{this.refresh&&this.refreshAllSlots()},e)}startRefresh(){this.refresh=!0}stopRefresh(){this.refresh=!1}optanonActiveGroupsListener(){let{OptanonActiveGroups:e}=window;e!==this.previousOptanonActiveGroups&&this.displayAdIfTargetingCookieIsChecked(),this.previousOptanonActiveGroups=e}displayAdIfTargetingCookieIsChecked(){let{OptanonActiveGroups:e}=window;e&&(null==e?void 0:e.indexOf(a.Im.TARGETING))>-1?(this.displayAllSlots(),this.refreshAllSlots(),this.startRefresh()):(this.clearAllSlots(),this.stopRefresh())}constructor(e,t){this.slots=e.map(e=>({...e,instance:e.instance||null})),this.refreshTime=t,this.refresh=!1,this.defineSlots(),this.previousOptanonActiveGroups=null==window?void 0:window.OptanonActiveGroups,setInterval(this.optanonActiveGroupsListener.bind(this),1e3)}}var i=s(5152),r=s.n(i),o=s(1163),c=s(7294),d=s(7442),u=e=>{let{id:t,style:s,className:a}=e;return(0,n.jsx)("div",{id:t,style:s,className:a})},h=s(7902),p=s(4027),f=s(7310),m=s(3177),b=s(7743),_=s.n(b),v=s(5988),w=s.n(v),g=e=>{let{dispatch:t}=e;return(0,n.jsx)("button",{className:w().fullscreen,type:"button",onClick:t,children:(0,n.jsx)("img",{src:"/images/loader/fullscreen.svg",alt:"Fullscreen",width:37,height:37})})},x=s(7416),y=s.n(x),S=e=>{let{loadingProgression:t}=e,s=Math.round(100*t);return(0,n.jsxs)("div",{className:y().loader,children:[(0,n.jsx)("img",{src:"/images/loader/running-stumbler.gif",alt:"Running stumbler",width:213,height:120,className:"relative top-8 mx-auto"}),(0,n.jsxs)("div",{className:"relative my-4 flex h-9 w-full items-center gap-x-2 rounded-lg border-2 border-solid border-black bg-transparent",children:[(0,n.jsx)("div",{className:"flex h-full items-center justify-end rounded-lg bg-cover bg-no-repeat",style:{width:"".concat(s,"%"),backgroundImage:"url('/images/loader/bar.png')"}}),(0,n.jsxs)("span",{className:"".concat(s>95?"absolute right-3":""," text-border-2 mr-2 font-lilita text-xs text-orange-light"),children:[s," %"]})]})]})},j=(0,c.createContext)({});let A=r()(Promise.resolve().then(s.bind(s,7442)).then(e=>e.Unity),{loadableGenerated:{webpack:()=>[7442]},ssr:!1}),k=JSON.parse("false");var N=()=>{let e=(0,o.useRouter)(),{OS:t}=(0,p.ZP)(),s=(0,c.useMemo)(()=>t&&t!==a.Ak.DESKTOP,[t]),{config:i,adsConfig:r}=(0,c.useContext)(j),b=r.id?r.attributes.refresh_rate:3e4,v="".concat("https://live-assets.web.stumbleguys.com","/unity/").concat(i.attributes.version,"/").concat(i.attributes.environment,"/").concat(i.attributes.hash),[w,x]=(0,c.useState)(),y="release"===i.attributes.build_type?".unityweb":"",{unityProvider:N,isLoaded:G,loadingProgression:P,sendMessage:B,addEventListener:C,requestFullscreen:I}=(0,d.useUnityContext)({loaderUrl:"".concat(v,"/WebGL.loader.js"),dataUrl:"".concat(v,"/WebGL.data").concat(y),frameworkUrl:"".concat(v,"/WebGL.framework.js").concat(y),codeUrl:"".concat(v,"/WebGL.wasm").concat(y),streamingAssetsUrl:"".concat(v,"/StreamingAssets"),cacheControl:function(e){return e.match(/\.data/)||e.match(/\.bundle/)?"must-revalidate":e.match(/\.mp4/)||e.match(/\.wav/)?"immutable":"no-store"},companyName:"Kitka Games",productName:"Stumble Guys",productVersion:i.attributes.version});(0,c.useEffect)(()=>{let t=e=>{e.includes("/play")||window.stop()};return e.events.on("routeChangeStart",t),()=>{e.events.off("routeChangeStart",t)}},[]),(0,c.useEffect)(()=>{t&&s&&e.push(a.RF[t])},[s,t]),(0,c.useEffect)(()=>{G&&(C("SendUnityMessage",E),B("ScopelyId","SetUnityInstanceAvailable"),B("PusherManager","SetUnityInstanceAvailable"))},[G,C]);let E=(0,c.useCallback)((e,t,s)=>{G&&B(e,t,s)},[G]),L=(0,c.useCallback)(()=>{G&&I(!0)},[G]);return(0,c.useEffect)(()=>{x(new l([{name:"/129575487/Stumble_Guys_Web/SbG_Web_Bann_AdExc_04_PLYv21",id:"div-gpt-play-120-left",sizes:[120,600]},{name:"/129575487/Stumble_Guys_Web/SbG_Web_Bann_AdExc_01_PLYz56",id:"div-gpt-play-160-left",sizes:[160,600]},{name:"/129575487/Stumble_Guys_Web/SbG_Web_Bann_AdExc_05_PLYv22",id:"div-gpt-play-120-right",sizes:[120,600]},{name:"/129575487/Stumble_Guys_Web/SbG_Web_Bann_AdExc_02_PLYdmn",id:"div-gpt-play-160-right",sizes:[160,600]}],b))},[]),(0,n.jsx)(f.Z,{title:a.H,children:(0,n.jsx)("div",{className:"".concat(_().sky),children:(0,n.jsxs)(m.Z,{classContainer:"".concat(_().container," flex-col justify-start items-center ").concat(s?"px-0":"px-44"," lg:px-44"),className:"".concat(s?"pt-24":"pt-12"," pb-52 lg:pt-8 xl:pt-12 2xl:pt-16"),children:[s?(0,n.jsx)(h.Z,{showSteam:!1}):(0,n.jsxs)(n.Fragment,{children:[w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u,{id:"div-gpt-play-120-left",className:"".concat(_().lateralBanner," ").concat(_().lateralBannerLeft)}),(0,n.jsx)(u,{id:"div-gpt-play-160-left",className:"".concat(_().lateralBanner," ").concat(_().lateralBannerLeft)}),(0,n.jsx)(u,{id:"div-gpt-play-120-right",className:"".concat(_().lateralBanner," ").concat(_().lateralBannerRight)}),(0,n.jsx)(u,{id:"div-gpt-play-160-right",className:"".concat(_().lateralBanner," ").concat(_().lateralBannerRight)})]}),!G&&(0,n.jsx)(S,{loadingProgression:P}),(0,n.jsx)(A,{unityProvider:N,style:{display:G?"block":"none"},className:_().canvas}),G&&(0,n.jsx)(g,{dispatch:L})]}),k&&(0,n.jsxs)("div",{className:"".concat(G?"mt-40":"mt-14"," flex flex-col text-white"),children:[(0,n.jsxs)("pre",{children:["Base URL: ",v]}),(0,n.jsxs)("pre",{children:["Environment: ",i.attributes.environment]}),(0,n.jsxs)("pre",{children:["Version: ",i.attributes.version]}),(0,n.jsxs)("pre",{children:["Hash: ",i.attributes.hash]}),(0,n.jsxs)("pre",{children:["Server URL: ",i.attributes.server_base_url]})]})]})})})},G=e=>{let{config:t,adsConfig:s,children:a}=e,l=(0,c.useMemo)(()=>({config:t,adsConfig:s}),[]);return(0,n.jsx)(j.Provider,{value:l,children:a})},P=!0,B=e=>(0,n.jsx)(G,{...e,children:(0,n.jsx)(N,{})})},7743:function(e){e.exports={sky:"Play_sky__VUdin",container:"Play_container__cxuT4",canvas:"Play_canvas__VqH8b",lateralBanner:"Play_lateralBanner__OmFFV",lateralBannerLeft:"Play_lateralBannerLeft__VkSXT",lateralBannerRight:"Play_lateralBannerRight__IkCPd"}},5988:function(e){e.exports={fullscreen:"Fullscreen_fullscreen___tI97"}},7416:function(e){e.exports={loader:"Loader_loader__I_YyD"}}},function(e){e.O(0,[977,900,774,888,179],function(){return e(e.s=7454)}),_N_E=e.O()}]);